var $=(e,t,o)=>{if(!t.has(e))throw TypeError("Cannot "+o)};var i=(e,t,o)=>($(e,t,"read from private field"),o?o.call(e):t.get(e)),I=(e,t,o)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,o)},S=(e,t,o,a)=>($(e,t,"write to private field"),a?a.call(e,o):t.set(e,o),o);import{a as ee,i as y}from"./vendor-c2f48a40.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();var f;class te{constructor(t){I(this,f,void 0);S(this,f,t)}setToStorage(t){localStorage.setItem(i(this,f),JSON.stringify(t))}getFromStorage(){const t=localStorage.getItem(i(this,f));return t?JSON.parse(t):null}}f=new WeakMap;var r;class se extends te{constructor(o){super(o);I(this,r,void 0);S(this,r,this.getFromStorage()||[])}addCard(o){this.isCardExisted(o._id)||(i(this,r).push(o),this.setToStorage(i(this,r)))}removeCard(o){const a=i(this,r).filter(({_id:s})=>s.toString()!==o.toString());S(this,r,[...a]),this.setToStorage(i(this,r))}getCards(o,a){if(o*a-a>i(this,r).length)throw console.log(o),new Error("Out of list");return i(this,r).length===0?{data:[],page:o,totalCount:0}:{data:i(this,r).filter((n,c)=>c>=o*a-a&&c<o*a),totalCount:i(this,r).length,page:o}}getAllCards(){return i(this,r).length===0?[]:i(this,r)}isCardExisted(o){return i(this,r).some(({_id:a})=>a===o)}get list(){return i(this,r)}}r=new WeakMap;const oe="favorite_sport_cards",De=10,ne="https://your-energy.b.goit.study/api",V=12,ae=10,d=ee.create({baseURL:ne,params:{}}),Ae=async(e,t=1)=>(await d.get("/filters",{params:{filter:e,page:t,limit:V}})).data,Oe=async(e=1)=>(await d.get("/filters",{params:{filter:"Muscles",page:e,limit:V}})).data,re=async()=>(await d.get("/quote")).data,Fe=async({bodypart:e,muscles:t,equipment:o,search:a},s=1)=>{const n=a&&!e&&!t&&!o?"":a;return(await d.get("/exercises",{params:{bodypart:e||"",muscles:t||"",equipment:o||"",keyword:n||"",page:s,limit:ae}})).data},ie=async e=>(await d.get(`/exercises/${e}`)).data,ce=async(e,t)=>{try{const o=await d.patch(`/exercises/${e}/rating`,t);if(o.statusText==="OK")return o.data}catch(o){throw new Error(o.message)}},Be=async e=>(await d.post("/subscription",e)).data,j={element:document.querySelector(".loader"),create(){this.element.classList.add("loader-active")},destroy(){this.element.classList.remove("loader-active")}},P=document.querySelector(".js-common-card-list"),Q=document.querySelector(".js-faovorites-wrapper"),le=document.querySelector(".excercise_units"),p=document.querySelector(".modal_window_container"),de=document.querySelector(".close_modal_button"),F=document.querySelector(".rate_button"),w=document.body,T=document.querySelector(".js-add-favorite-btn"),ue=document.querySelector(".modal_title"),me=document.querySelector(".excercise_rating"),U=document.querySelector(".modal_image"),m=document.querySelector(".first_star"),_=document.querySelector(".second_star"),v=document.querySelector(".third_star"),R=document.querySelector(".fourth_star"),z=document.querySelector(".fifth_star");let l=null;const x=new se(oe);P&&P.addEventListener("click",G);Q&&Q.addEventListener("click",G);de.addEventListener("click",Se);F.addEventListener("click",Le);T.addEventListener("click",fe);function D(e){x.isCardExisted(e)?T.classList.add("is-card-existed"):T.classList.remove("is-card-existed")}function fe(){l&&(x.isCardExisted(l._id)?(x.removeCard(l._id),D(l._id)):(x.addCard(l),D(l._id)))}function ge(e){e!==null&&(ue.textContent=e)}function he(e){if(e!==null){let t=e.toFixed(1);me.textContent=t}}function A(){m.classList.remove("rating_star_filled"),_.classList.remove("rating_star_filled"),v.classList.remove("rating_star_filled"),R.classList.remove("rating_star_filled"),z.classList.remove("rating_star_filled")}function ye(e){if(e===5)m.classList.add("rating_star_filled"),_.classList.add("rating_star_filled"),v.classList.add("rating_star_filled"),R.classList.add("rating_star_filled"),z.classList.add("rating_star_filled");else if(e>=4)m.classList.add("rating_star_filled"),_.classList.add("rating_star_filled"),v.classList.add("rating_star_filled"),R.classList.add("rating_star_filled");else if(e>=3)m.classList.add("rating_star_filled"),_.classList.add("rating_star_filled"),v.classList.add("rating_star_filled");else if(e>=2)m.classList.add("rating_star_filled"),_.classList.add("rating_star_filled");else if(e>=1)m.classList.add("rating_star_filled");else return}function _e(e,t){e!==null&&(U.src=e,U.alt=t)}function pe({time:e,bodyPart:t,equipment:o,target:a,description:s,burnedCalories:n,popularity:c}){return`<li class="excercise_item"><h4 class="excercise_title">Taget</h4><p class="excercise_text">${a}</p></li>
<li class="excercise_item"><h4 class="excercise_title">Body Part</h4>
        <p class="excercise_text">${t}</p></li>
 <li class="excercise_item"><h4 class="excercise_title">Equipment</h4>
        <p class="excercise_text">${o}</p></li>
        <li class="excercise_item"><h4 class="excercise_title">Popular</h4>
        <p class="excercise_text">${c}</p></li>
        <li class="excercise_item"><h4 class="excercise_title">Burned calories</h4>
        <p class="excercise_text">${n}/${e} min</p></li>
        <p class="modal_text">${s}</p>
`}function Le(){F.classList.remove("is-hidden"),p.classList.add("is-hidden"),window.removeEventListener("keydown",b),window.removeEventListener("click",b)}function G(e){const t=e.target.closest(".js-excercise-button");if(!t)return;const a=t.closest(".js-common-card-item").dataset.exerciseId;j.create(),ie(a).then(s=>{const n=pe(s);le.innerHTML=n,ge(s.name),he(s.rating),ye(s.rating),_e(s.gifUrl,s.name),l=s,console.log(s),D(s._id)}).catch(s=>{console.error(s),y.show({position:"center",color:"red",message:"An error has ocurred. Please try again later"})}).finally(()=>{j.destroy()}),F.setAttribute("data-Id",a),p.classList.remove("is-hidden"),w.style.overflow="hidden",window.addEventListener("keydown",b),window.addEventListener("click",b)}function b(e){e.key==="Escape"?(p.classList.add("is-hidden"),w.style.overflow="visible",A()):e.target.closest(".modal_window_default_content,.js-excercise-button")||(p.classList.add("is-hidden"),w.style.overflow="visible",A())}function Se(){p.classList.add("is-hidden"),w.style.overflow="visible",A()}const O=document.querySelector("[data-modal]"),B=document.querySelector("p[data-raiting]"),H=document.querySelector(".rating_form"),N=[...document.getElementsByClassName("btn_star")],Y=document.querySelector(".modal_window_container");let L=0,u={};const ve=()=>{H.reset(),L=0,B.textContent="0.0",N.forEach(e=>{e.classList.remove("btn_star-active")}),O.classList.add("is-hidden"),Y.classList.remove("is-hidden")};H.addEventListener("submit",async e=>{e.preventDefault();const o=document.querySelector("[data-id]").dataset.id;if(new FormData(e.currentTarget).forEach((s,n)=>{u[n]=s.trim()}),u.rate=L,u.rate<1){y.show({title:"The rate must be selected",color:"red",position:"topCenter",message:""});return}if(!u.email||!u.review){y.show({title:"The email and comment must be selected",color:"red",position:"topCenter",message:""});return}await ce(o,u).then(()=>{y.show({title:"The rating has been successfully added",color:"green",position:"topCenter",message:""}),ve()}).catch(s=>{y.show({title:`${s.message}`,color:"red",position:"topCenter",message:""})})});function xe(e){const t="btn_star-active",o="btn_star",a=e.length;let s;e.map(n=>{n.onclick=()=>{if(s=e.indexOf(n),n.className===o)for(s;s>=0;--s)e[s].className=t;else for(s;s<a;++s)e[s].className=o;L=e.filter(g=>{if(g.className===t)return g}).length,B.textContent=`${L}.0`}})}xe(N);(()=>{const e={openModalBtn:document.querySelector("[data-modal-open]"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]")};e.openModalBtn.addEventListener("click",t),e.closeModalBtn.addEventListener("click",o),e.modal.addEventListener("click",a);function t(){O.classList.remove("is-hidden"),document.addEventListener("keydown",s)}function o(){L=0,N.forEach(n=>{n.classList.remove("btn_star-active"),n.classList.add("btn_star")}),B.textContent="0.0",O.classList.add("is-hidden"),Y.classList.remove("is-hidden"),document.removeEventListener("keydown",s)}function a(n){n.target===n.currentTarget&&o()}function s(n){n.key==="Escape"&&o()}})();const E=document.querySelector(".change_theme--btn"),q=document.querySelector(".icon_sun"),k=document.querySelector(".icon_moon"),W=localStorage.getItem("theme"),C=document.querySelector("body"),M=document.querySelector(".mobile_menu--btn");document.querySelector(".mobile_menu");E.addEventListener("click",we);M.addEventListener("click",be);function we(){const e=document.body;e.classList.toggle("dark_mode"),E.classList.toggle("change_theme--btn-on"),e.classList.contains("dark_mode")?(localStorage.setItem("theme","dark"),q.style.display="none",k.style.display="block"):(localStorage.setItem("theme","light"),q.style.display="block",k.style.display="none")}W==="dark"?(C.classList.add("dark_mode"),q.style.display="none",k.style.display="block",E.classList.add("change_theme--btn-on")):(C.classList.remove("dark_mode"),q.style.display="block",k.style.display="none",E.classList.remove("change_theme--btn-on"));function be(){const e=document.body;e.classList.toggle("dark_mode"),M.classList.toggle("show"),e.classList.contains("dark_mode")?localStorage.setItem("theme","dark"):localStorage.setItem("theme","light")}W==="dark"?(C.classList.add("dark_mode"),M.classList.add("show")):(C.classList.remove("dark_mode"),M.classList.remove("show"));function Ee(){const e=document.querySelector(".js-menu-container"),t=document.querySelector(".js-open-menu"),o=document.querySelector(".js-close-menu"),a=document.body,s=()=>{const h=t.getAttribute("aria-expanded")==="true"||!1;t.setAttribute("aria-expanded",!h),e.classList.toggle("is-open"),a.classList.toggle("menu-open"),a.classList.contains("menu-open")?c():g()},n=()=>{e.classList.remove("is-open"),t.setAttribute("aria-expanded",!1),a.classList.remove("menu-open"),g()},c=()=>{a.style.overflow="hidden"},g=()=>{a.style.overflow="visible"};t.addEventListener("click",s),o.addEventListener("click",s),window.matchMedia("(min-width: 768px)").addEventListener("change",h=>{h.matches&&n()}),document.addEventListener("keydown",h=>{h.key==="Escape"&&e.classList.contains("is-open")&&n()})}Ee();const X="quote",qe=document.querySelector(".quote-text"),K=document.querySelector(".quote-author"),ke=document.querySelector(".favorites-quote-text"),Ce=document.querySelector(".favorites-quote-author");async function Me(){try{const{author:e,quote:t}=await re(),o=new Date().toLocaleDateString();localStorage.setItem(X,JSON.stringify({author:e,quote:t,date:o}))}catch(e){console.error("Failed to fetch the quote:",e)}}function Z(){const e=localStorage.getItem(X);return JSON.parse(e)}function J(){const e=Z();K?(qe.textContent=e.quote,K.textContent=e.author):(ke.textContent=e.quote,Ce.textContent=e.author)}async function Ie(){const e=new Date().toLocaleDateString(),t=Z();if(t&&t.date===e){J();return}await Me(),J()}document.addEventListener("DOMContentLoaded",Ie);export{se as F,te as S,oe as a,De as b,Ae as c,Fe as d,Be as e,Oe as g,j as l};
//# sourceMappingURL=quote-5de1291e.js.map
