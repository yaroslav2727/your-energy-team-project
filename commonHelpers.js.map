{"version":3,"file":"commonHelpers.js","sources":["../src/js/favorites/createCardMarkup.js","../src/js/favorites/Storage.js","../src/js/favorites/FavoritesStorage.js","../src/js/favorites/mockData.js","../src/js/favorites/favoritesConfig.js","../src/js/favorites/favorites.js"],"sourcesContent":["export function createCardMarkup({\n  _id,\n  burnedCalories,\n  time,\n  bodyPart,\n  target,\n  name,\n}) {\n  return `    <li class=\"favorites__item\">\n                <div class=\"favorites__card\" href=\"\">\n                  <div class=\"sport-card\">\n                    <div class=\"sport-card__header\">\n                      <div class=\"sport-card__tag-wrapper\">\n                        <p class=\"sport-card__tag\">WORKOUT</p>\n                        <!-- <svg class=\"\" width=\"\" height=\"\">\n                      <use href=\"\"></use>\n                    </svg> -->\n  \n                        <!-- Temporary icon -->\n                        <button\n                          class=\"button sport-card__remove-btn js-favorites-remove\"\n                          type=\"button\"\n                          aria-label=\"Remove card button\"\n                          data-card-id=\"${_id}\"\n                        >\n                        \n\n                             <svg class=\"icon\" width=\"16\" height=\"16\" >\n                              <use href=\"./img/icons.svg#icon-trash\"></use>\n                            </svg>\n                        </button>\n                      </div>\n  \n                      <button class=\"button sport-card__start-btn\" type=\"button\" data-card-id=\"${_id}\">\n                        Start\n                     \n                          <svg class=\"icon\" width=\"16\" height=\"16\" >\n                              <use href=\"./img/icons.svg#icon-arrow\"></use>\n                            </svg>\n                        \n                      </button>\n                    </div>\n  \n                    <div class=\"sport-card__meta\">                     \n\n                      <svg class=\"icon\" width=\"24\" height=\"24\">\n                        <use href=\"./img/icons.svg#icon-runner\"></use>\n                      </svg>\n  \n                      <p class=\"sport-card__name\">${name}</p>\n                    </div>\n  \n                    <div class=\"sport-card__footer\">\n                      <ul class=\"sport-card__param-list\">\n                        <li class=\"sport-card__param-item\">\n                          Burned calories:<span class=\"sport-card__param__value\"\n                            >${burnedCalories} / ${time} min</span\n                          >\n                        </li>\n                        <li class=\"sport-card__param-item\">\n                          Body part:<span class=\"sport-card__param__value\"\n                            >${bodyPart}</span\n                          >\n                        </li>\n                        <li class=\"sport-card__param-item\">\n                          Target:<span class=\"sport-card__param__value\">${target}</span>\n                        </li>\n                      </ul>\n                    </div>\n                  </div>\n                </div>\n              </li>`;\n}\n","export class Storage {\n  #key;\n  constructor(key) {\n    this.#key = key;\n  }\n\n  setToStorage(data) {\n    localStorage.setItem(this.#key, JSON.stringify(data));\n  }\n\n  getFromStorage() {\n    const res = localStorage.getItem(this.#key);\n    return res ? JSON.parse(res) : null;\n  }\n}\n","import { Storage } from './Storage';\n\nexport class FavoritesStorage extends Storage {\n  #list;\n\n  constructor(key) {\n    super(key);\n    this.#list = this.getFromStorage() || [];\n  }\n\n  addCard(card) {\n    if (this.#isCardExisted(card._id)) return;\n\n    this.#list.push(card);\n    this.setToStorage(this.#list);\n  }\n\n  removeCard(id) {\n    const updatedList = this.#list.filter(\n      ({ _id }) => _id.toString() !== id.toString()\n    );\n\n    this.#list = [...updatedList];\n    this.setToStorage(this.#list);\n  }\n\n  getCards(page, limit) {\n    if (page * limit - limit > this.#list.length) {\n      throw new Error('Out of list');\n    }\n\n    if (this.#list.length === 0) return { data: [] };\n\n    const data = this.#list.filter(\n      (item, i) => i >= page * limit - limit && i < page * limit\n    );\n    return { data, totalCount: this.#list.length, page };\n  }\n\n  #isCardExisted(id) {\n    return this.#list.some(({ _id }) => _id === id);\n  }\n\n  get list() {\n    return this.#list;\n  }\n}\n\n/*\npage 2 , limit 5\n\npage 1 ->  0 1 2 3 4\npage 2 ->  5 6 7 8 9\npage 3 -> 10 11 12 13 14  \n\n\n*/\n","export const mockFavoritesData = [\n  {\n    _id: 1,\n    burnedCalories: '312',\n    time: '3',\n    name: 'air bike1',\n    bodyPart: 'Waist',\n    target: 'Abs',\n  },\n  {\n    _id: 2,\n    burnedCalories: '312',\n    time: '3',\n    name: 'Air bike2',\n    bodyPart: 'Waist',\n    target: 'Abs',\n  },\n  {\n    _id: 3,\n    burnedCalories: '312',\n    time: '3',\n    name: 'Air bike3',\n    bodyPart: 'Waist',\n    target: 'Abs',\n  },\n  {\n    _id: 4,\n    burnedCalories: '312',\n    time: '3',\n    name: 'Air bike4',\n    bodyPart: 'Waist',\n    target: 'Abs',\n  },\n  {\n    _id: 5,\n    burnedCalories: '312',\n    time: '3',\n    name: 'Air bike5',\n    bodyPart: 'Waist',\n    target: 'Abs',\n  },\n  {\n    _id: 6,\n    burnedCalories: '312',\n    time: '3',\n    name: 'Air bike6',\n    bodyPart: 'Waist',\n    target: 'Abs',\n  },\n  {\n    _id: 7,\n    burnedCalories: '312',\n    time: '3',\n    name: 'Air bike7',\n    bodyPart: 'Waist',\n    target: 'Abs',\n  },\n  {\n    _id: 8,\n    burnedCalories: '312',\n    time: '3',\n    name: 'Air bike8',\n    bodyPart: 'Waist',\n    target: 'Abs',\n  },\n  {\n    _id: 9,\n    burnedCalories: '312',\n    time: '3',\n    name: 'Air bike9',\n    bodyPart: 'Waist',\n    target: 'Abs',\n  },\n  {\n    _id: 10,\n    burnedCalories: '312',\n    time: '3',\n    name: 'Air bike10',\n    bodyPart: 'Waist',\n    target: 'Abs',\n  },\n  {\n    _id: 11,\n    burnedCalories: '312',\n    time: '3',\n    name: 'Air bike11',\n    bodyPart: 'Waist',\n    target: 'Abs',\n  },\n  {\n    _id: 12,\n    burnedCalories: '312',\n    time: '3',\n    name: 'Air bike12',\n    bodyPart: 'Waist',\n    target: 'Abs',\n  },\n  {\n    _id: 13,\n    burnedCalories: '312',\n    time: '3',\n    name: 'Air bike13',\n    bodyPart: 'Waist',\n    target: 'Abs',\n  },\n  {\n    _id: 14,\n    burnedCalories: '312',\n    time: '3',\n    name: 'Air bike14',\n    bodyPart: 'Waist',\n    target: 'Abs',\n  },\n  {\n    _id: 15,\n    burnedCalories: '312',\n    time: '3',\n    name: 'Air bike15',\n    bodyPart: 'Waist',\n    target: 'Abs',\n  },\n  {\n    _id: 16,\n    burnedCalories: '312',\n    time: '3',\n    name: 'Air bike16',\n    bodyPart: 'Waist',\n    target: 'Abs',\n  },\n  {\n    _id: 17,\n    burnedCalories: '312',\n    time: '3',\n    name: 'Air bike17',\n    bodyPart: 'Waist',\n    target: 'Abs',\n  },\n  {\n    _id: 18,\n    burnedCalories: '312',\n    time: '3',\n    name: 'Air bike18',\n    bodyPart: 'Waist',\n    target: 'Abs',\n  },\n];\n","export const FAVORITES_STORAGE_KEY = 'favorite_sport_cards';\n","import { createStorage } from '../storageApi';\nimport { createCardMarkup } from './createCardMarkup';\nimport { FavoritesStorage } from './FavoritesStorage';\nimport { mockFavoritesData } from './mockData';\nimport { Storage } from './Storage';\nimport { FAVORITES_STORAGE_KEY } from './favoritesConfig';\n\nconst FAVORITES_PER_PAGE = 5;\n\nconst listRef = document.querySelector('.js-favorites-list');\nconst noCardsMessageRef = document.querySelector('.js-favorites-no-cards');\n\n//-------------------------------\nconst favoritesStorage = new FavoritesStorage(FAVORITES_STORAGE_KEY);\n\nconst pageState = createPageState(1, updateData);\n\n//TEMP----------------------\nmockFavoritesData.forEach(card => {\n  favoritesStorage.addCard(card);\n});\n\nconst tempAddBtnRef = document.querySelector('.js-temp-add-to-favorites');\nconst tempPageIncrease = document.querySelector('.js-temp-page-up');\nconst tempPageDecrease = document.querySelector('.js-temp-page-down');\n\nlet tempCount = 1111;\ntempAddBtnRef.addEventListener('click', e => {\n  // const cardId = e.target.dataset.cardId;\n  const card = {\n    _id: tempCount++,\n    burnedCalories: '312',\n    time: '3',\n    name: 'Test card19-new',\n    bodyPart: 'Waist',\n    target: 'Abs',\n  };\n\n  favoritesStorage.addCard(card);\n  updateData();\n});\n\ntempPageIncrease.addEventListener('click', pageState.increase);\ntempPageDecrease.addEventListener('click', pageState.decrease);\n//TEMP----------------------\n\nlistRef.addEventListener('click', e => {\n  const delBtn = e.target.closest('.js-favorites-remove');\n  if (!delBtn) return;\n\n  const cardId = delBtn.dataset.cardId;\n  favoritesStorage.removeCard(cardId);\n  updateData();\n});\n\nupdateData();\n\n///////////////////////////////////////////////////////////////////////////\n\nfunction updateData() {\n  const response = favoritesStorage.getCards(\n    pageState.getPage(),\n    FAVORITES_PER_PAGE\n  );\n  console.log(response);\n  render(response.data);\n}\n\nfunction render(list) {\n  if (list.length === 0) {\n    noCardsMessageRef.classList.add('is-visible');\n    listRef.innerHTML = '';\n    return;\n  } else {\n    noCardsMessageRef.classList.remove('is-visible');\n  }\n\n  const markup = list.map(createCardMarkup).join('');\n  listRef.innerHTML = markup;\n}\n\nfunction createPageState(initialPage, handler) {\n  const storage = new Storage('favorites_page');\n\n  let page = storage.getFromStorage() || initialPage;\n\n  return {\n    increase() {\n      page++;\n      storage.setToStorage(page);\n      handler();\n    },\n\n    decrease() {\n      page--;\n      storage.setToStorage(page);\n      handler();\n    },\n\n    getPage() {\n      return page;\n    },\n  };\n}\n"],"names":["createCardMarkup","_id","burnedCalories","time","bodyPart","target","name","Storage","key","__privateAdd","_key","__privateSet","data","__privateGet","res","FavoritesStorage","_isCardExisted","_list","card","__privateMethod","isCardExisted_fn","id","updatedList","page","limit","item","i","mockFavoritesData","FAVORITES_STORAGE_KEY","FAVORITES_PER_PAGE","listRef","noCardsMessageRef","favoritesStorage","pageState","createPageState","updateData","tempAddBtnRef","tempPageIncrease","tempPageDecrease","tempCount","e","delBtn","cardId","response","render","list","markup","initialPage","handler","storage"],"mappings":"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"}